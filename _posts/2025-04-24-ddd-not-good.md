---
layout: post
title: "DDD, and some clean shits"
slug: ddd-clean
category: essay
---

## DDD, 헥사고날

개발자들을 유혹하는 단어들이 존재한다. 그것은 멋진 말과 몇몇 회사에서의 사례로 다른 이들을 현혹하며 잘못된 길로 가게 만든다.
DDD와 헥사고날등이 그렇다.

### 너는 DDD를 잘 모른다

아마 당신은 DDD를 좋게 보고있을 것이다. 아니면 그것을 위한 책을 읽었을 수도 있겠지. 그런데 대부분의 사람들은 뜻을 오해한다.
DDD를 읽고 제일 처음 들어야하는 생각은 "우리 회사는 왜/어떻게 돈을 벌고있지?"가 되어야한다. repository나 domain model이 아니다.

도메인, 정의역, 문제 분야를 잘 이해해야한다. 그게 중요하고, 그것을 잘 모델링 해야하는 것이 도메인 주도 설계의 핵심이다.
하지만 대다수의 사람들은 기술에 좀 더 집중한다. 도메인 모델을 나누는 방법, id 생성 방식, repository 구현, package 네이밍등이 있다.

### 너는 헥사고날을 잘 모른다

DDD를 하다보면 꼭 헥사고날, 혹은 클린 아키텍처라는 이야기가 나온다.
테스트의 중요성을 강조하면서 이야기를 하고, 의존성 주입과 역전에 대한 이야기를 한다. 뭔가 멋져보이고, 멀티 프로젝트 구조를 가져가고 여러 용어들이 나온다. 어떤 책에서는 adapter를 패키지로 만들라고 하거나, inbound/outbound를 구분하라는 이야기도 한다.

그런데 저런 개념들은 핵심이 아니다. 헥사고날의 제일 중요한 것은 어플리케이션의 내부와 외부의 분리이다. 어떤게 우리 어플리케이션이고, 어떤게 어플리케이션 바깥의 것인가. DB, http, email, redis등 다양한 것이 있지만 내부와 외부는 온전히 멘탈 모델에 대한 것이다. 우리의 사고 방식에 대한 것이다.

### 사고 방식이 거의 설계의 전부이다

나는 어떻게 사고하는지가 매우 중요하다고 생각한다. 코드를 구성하는 것부터, 구현하는 디테일, 커뮤니케이션, 그리고 앞으로의 회사 방향까지도 사고 방식에 의하여 결정된다. 적절하게 추상화 된 컴포넌트의 조합으로 구성된 무언가, 그게 소프트웨어의 핵심이다.

그러면 어떠한 사고방식이 적절한지 어떻게 알 수 있을까? 그건 간단하다. 얼마나 비즈니스가 성공했는지에 달렸다. 운이다. 미래를 예측해야한다. 그러니 우리의 도메인에 관심을 가져라. 우리의 내부와 외부를 구분하자. 이게 전부이다.

----

### 그러니 DDD를 하자는 이야기는 그만두자.

그러니 우리는 DDD와 같은 단어에 신경쓰지 말자. 헥사고날을 하지 말자고 선언하자.
그 대신 그들이 처음 주장했던 가치를 지치기 위하여 노력하자.

> 언제나 가치는 원칙보다, 원칙은 practice보다 우선된다.

사소한 practice들을 버리자. repository 패턴을 쓰지 말자. adapter를 만들지 말자. package/project 구성에 시간을 쓰지 말자.
